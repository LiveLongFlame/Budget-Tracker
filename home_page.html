<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker</title>
   
</head>
<body>
    <h1>Upload File</h1>
    <form id="form" method="post" action="" enctype="multipart/form-data">
        <input id="file" type="file">
        <br><br>
        <button id="upload_file" type="submit">Upload File</button>
    </form>
</body>

<script >document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('form');
    const fileInput = document.getElementById('file');
    
    form.addEventListener("submit", function(event) {
        event.preventDefault();  

        //make sure that the files are not empty 
        if(fileInput.length < 0){
            console.log("ERROR NO FILE PROVIDED")
            return;
        }

        const file = fileInput.files[0];  
        if (file) {
                console.log(file);
                const reader = new FileReader();
                reader.onload = function (e) {
                    const text = e.target.result; // Get the CSV text content
                
                    // Split text by lines, then split each line into an array of values
                    const rows = text.trim().split("\n").map(row => row.split(","));
                
                    // Log the entire parsed CSV as an array of rows
                    console.log("Parsed Rows (Before Processing):", rows);
                
                    // Add NULL to empty rows
                    rows.forEach((row, index) => {
                        if (row.every(cell => cell.trim() === "")) {
                            rows[index] = ["NULL"];
                        }
                    });
                
                    console.log("Parsed Rows (After Processing):", rows);
                
                    // Process each row
                    rows.forEach((row, index) => {
                        console.log(`Row ${index}:`, row[5] || "N/A"); // Safely access the 6th column
                    });

                    // Process each row
                    rows.forEach((row, index) => {
                        console.log(`Row ${index }:`, row[5]); 
                    });
                };
                reader.readAsText(file);
        } else {
            console.log("No file selected.");
        }
    });
});</script>
</html>

